---
title: "Women's Soccer Data"
---

We'll use this notebook to explore some NCAA women's soccer data and [our questions](https://docs.google.com/spreadsheets/d/1G1AjH2iS6kj3kKHCRi0XVy5Lcm-rahJkeTAToVh9J1g/edit?gid=0#gid=0). First, let's load the tidyverse library:

```{r}
library(tidyverse)
```

We'll want to start with 2025 match data, which is located in [this GitHub repository](https://github.com/dwillis/NCAAWomensSoccerData). We can load the match data directly from GitHub using `read_csv`:


```{r}
matches_2025 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2025.csv")
```

Let's take a look at this data to see what it contains, using `head` and `glimpse`:

```{r}
head(matches_2025)
glimpse(matches_2025)
```

Now, onto the questions using aggregates, which means `group_by` and `summarize`:

1. How many shots in total has Maryland attempted and how many have been on goal? Calculate a percentage of shots on goal.

```{r}
matches_2025 |>
  filter(team == "Maryland Terrapins, Terps") |>
  summarize(
    total_shots = sum(sh_att),
    total_on_goal = sum(so_g),
    pct_on_goal = (((sum(so_g))/(sum(sh_att)))*100)
  )


```

2. What about the same shot stats from last season's first four games? You'll need to load the matches from 2024 - just change the season in the URL - and filter by date to find the first four games.

```{r}
matches_2024 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2024.csv")

matches_2024 |>
  filter(team == "Maryland Terrapins, Terps") |>
  filter(case_when(
    opponent == "Lehigh" ~ TRUE,
    opponent == "Stony Brook" ~ TRUE,
    opponent == "American" ~ TRUE,
    opponent == "James Madison" ~ TRUE,
  )) |>
  summarize(
    total_shots = sum(sh_att),
    total_on_goal = sum(so_g),
    pct_on_goal = (((sum(so_g))/(sum(sh_att)))*100)
  )
  
  


```


3. Maryland started 2022 with 4 draws. Have any other teams had as many this season?

```{r}
matches_2025 |>
  group_by(team) |>
  filter(outcome == "Draw") |>
  summarize(total_draws = n()) |>
  arrange(desc(total_draws))

##Only Cal Poly and Drexel had four or more draws at all in the 2025 data set. Upon checking both of their results, it appears Cal Poly had all five in a row. Drexel had two in a row at most. So Cal Poly not only matches Maryland's streak, but surpassed it.##


```


4. How many total corner kicks has Maryland had so far this season and how many have its opponents have? Calculate the difference between the two totals for every team using group_by, summarize and mutate, then filter to find Maryland's totals.

```{r}
matches_2025 |>
  group_by(team) |>
  summarize(total_corners_for = sum(corners), total_corners_against = sum(defensive_corners), difference = ((sum(corners)-sum(defensive_corners)))) |> 
  filter(team == "Maryland Terrapins, Terps")


                                                                                                          
```

5. What's the most interesting thing you've seen from these questions?

I don't think I've ever properly taken advantage of the filter function and I always seem to get myself confused when I am parsing through the data by writing code in the filter function. I had a bit of a moment of clarity with it in this assignment. For whatever reason, just hasn't always processed in my brain well. Something clicked while I did this assignment, whatever it was. 

I think I am also finding more and more comfort in R with the many different ways you can achieve the result you want. Compared to myself at this time last year where an assignment like this would freak me out and take me forever to do because I was trying to find the perfect solution, I could think of multiple ways to go about answering some of these questions as I worked through the notebook. 

In terms of the actual data analysis aspect of it, there are a lot of good basic stats we can work with here because we are easily able to work with game-by-game numbers as well as grouping them together for bigger picture, season-long stats. That allows us to make more direct comparisons from team to team or from game to game for a certain team. We can discover trends in the data with granular information like this as well as look for improvement or regression in a certain team, stat or performance. 
